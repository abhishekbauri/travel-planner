import {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate a 2-day travel plan for friends in Mumbai, India with a luxury budget, including budget-friendly hotel options (name, address, price, image, coordinates, rating, and description) and a detailed daily itinerary (place name, details, image, coordinates, ticket pricing, travel time, and best visiting time) in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "tripName": "Luxury Mumbai Getaway with Friends",\n  "duration": "2 Days",\n  "location": "Mumbai, India",\n  "budget": "Luxury (with budget-friendly hotel options)",\n  "travelers": "Friends",\n  "hotelOptions": [\n    {\n      "name": "The Taj Mahal Palace, Mumbai",\n      "address": "Apollo Bunder, Colaba, Mumbai, Maharashtra 400001, India",\n      "price": "₹25,000 - ₹50,000 per night",\n      "image": "https://example.com/tajmahalpalace.jpg",\n      "coordinates": {\n        "latitude": 18.9220,\n        "longitude": 72.8347\n      },\n      "rating": 4.7,\n      "description": "Iconic luxury hotel with stunning architecture, sea views, and world-class service. A truly unforgettable experience."\n    },\n    {\n      "name": "The Oberoi Mumbai",\n      "address": "Nariman Point, Mumbai, Maharashtra 400021, India",\n      "price": "₹20,000 - ₹40,000 per night",\n      "image": "https://example.com/oberoimumbai.jpg",\n      "coordinates": {\n        "latitude": 18.9312,\n        "longitude": 72.8255\n      },\n      "rating": 4.6,\n      "description": "Modern luxury hotel offering breathtaking views of the Arabian Sea, exquisite dining options, and personalized service."\n    },\n    {\n      "name": "Budget-Friendly: The Gordon House Hotel (Boutique Option)",\n      "address": "5, Battery Street, Apollo Bunder, Colaba, Mumbai, Maharashtra 400001, India",\n      "price": "₹6,000 - ₹10,000 per night",\n      "image": "https://example.com/gordonhousehotel.jpg",\n      "coordinates": {\n        "latitude": 18.9215,\n        "longitude": 72.8355\n      },\n      "rating": 4.2,\n      "description": "Stylish boutique hotel in Colaba, offering comfortable rooms and a vibrant atmosphere at a more affordable price."\n    },\n    {\n      "name": "Budget-Friendly: Hotel Sea Princess (4-star)",\n      "address": "Juhu Tara Road, Juhu, Mumbai, Maharashtra 400049, India",\n      "price": "₹8,000 - ₹12,000 per night",\n      "image": "https://example.com/seaprincess.jpg",\n      "coordinates": {\n        "latitude": 19.0963,\n        "longitude": 72.8255\n      },\n      "rating": 4.0,\n      "description": "Comfortable 4-star hotel near Juhu Beach, offering good amenities and a relaxed atmosphere at a reasonable price."\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "title": "Historical Mumbai & Fine Dining",\n      "date": "2024-01-27",\n      "activities": [\n        {\n          "placeName": "Gateway of India",\n          "details": "Iconic arch monument overlooking the Arabian Sea. Perfect for photos and experiencing the city\'s energy.",\n          "image": "https://example.com/gatewayofindia.jpg",\n          "coordinates": {\n            "latitude": 18.9220,\n            "longitude": 72.8347\n          },\n          "ticketPricing": "Free",\n          "travelTime": "Check-in at hotel, then a short taxi/Uber ride (15-20 mins from Colaba hotels).",\n          "bestVisitingTime": "Early morning (8:00 AM - 10:00 AM) to avoid crowds and enjoy pleasant weather.",\n          "duration": "1-2 hours"\n        },\n        {\n          "placeName": "Chhatrapati Shivaji Maharaj Terminus (CST)",\n          "details": "UNESCO World Heritage Site, a stunning example of Victorian Gothic architecture. Take a guided tour to learn about its history.",\n          "image": "https://example.com/cst.jpg",\n          "coordinates": {\n            "latitude": 18.9402,\n            "longitude": 72.8347\n          },\n          "ticketPricing": "Free to view; Guided tours available for a fee (₹200-₹500)",\n          "travelTime": "Taxi/Uber ride from Gateway of India (15-20 mins).",\n          "bestVisitingTime": "Mid-morning (10:30 AM - 12:00 PM).",\n          "duration": "1-2 hours"\n        },\n        {\n          "placeName": "Lunch at The Table",\n          "details": "Fine dining restaurant known for its global cuisine and elegant ambiance. Make reservations in advance.",\n          "image": "https://example.com/thetable.jpg",\n          "coordinates": {\n            "latitude": 18.9165,\n            "longitude": 72.8174\n          },\n          "ticketPricing": "₹3,000 - ₹5,000 per person",\n          "travelTime": "Taxi/Uber ride from CST (20-30 mins depending on traffic).",\n          "bestVisitingTime": "Lunch hours (1:00 PM - 3:00 PM).",\n          "duration": "1.5 - 2 hours"\n        },\n        {\n          "placeName": "Elephanta Caves",\n          "details": "UNESCO World Heritage Site on Elephanta Island, featuring ancient rock-cut temples dedicated to Lord Shiva. Take a ferry from the Gateway of India.",\n          "image": "https://example.com/elephanta.jpg",\n          "coordinates": {\n            "latitude": 18.9667,\n            "longitude": 72.9333\n          },\n          "ticketPricing": "Ferry: ₹200 - ₹300 per person (round trip); Entrance fee: ₹5 per Indian citizen, ₹600 per foreigner",\n          "travelTime": "Ferry from Gateway of India (1 hour each way).",\n          "bestVisitingTime": "Afternoon (2:00 PM - 5:00 PM), allow ample time for the ferry and exploration.",\n          "duration": "3-4 hours (including ferry time)"\n        },\n        {\n          "placeName": "Dinner at Ziya (The Oberoi)",\n          "details": "Michelin Star recommended Indian restaurant at The Oberoi, offering a modern take on traditional flavors. Dress code: Smart Casual. Reservations essential.",\n          "image": "https://example.com/ziya.jpg",\n          "coordinates": {\n            "latitude": 18.9312,\n            "longitude": 72.8255\n          },\n          "ticketPricing": "₹4,000 - ₹7,000 per person",\n          "travelTime": "Taxi/Uber ride from Gateway of India or your hotel (depending on location).",\n          "bestVisitingTime": "Dinner hours (8:00 PM - 10:00 PM).",\n          "duration": "2-3 hours"\n        }\n      ]\n    },\n    "day2": {\n      "title": "Bollywood, Shopping & Relaxation",\n      "date": "2024-01-28",\n      "activities": [\n        {\n          "placeName": "Bollywood Studio Tour",\n          "details": "Experience the magic of Bollywood with a studio tour. Learn about film-making, see sets, and maybe even meet some stars! (Book in advance).",\n          "image": "https://example.com/bollywoodtour.jpg",\n          "coordinates": {\n            "latitude": 19.1500,\n            "longitude": 72.8500\n          },\n          "ticketPricing": "₹2,000 - ₹5,000 per person (depending on the tour)",\n          "travelTime": "Taxi/Uber ride from your hotel (45 mins - 1 hour depending on traffic and studio location). Most studios are in the suburbs.",\n          "bestVisitingTime": "Morning (10:00 AM - 1:00 PM) to avoid afternoon heat.",\n          "duration": "3-4 hours"\n        },\n        {\n          "placeName": "Lunch at Prithvi Cafe",\n          "details": "A relaxed and popular cafe in Juhu known for its delicious food, casual ambiance, and association with Prithvi Theatre. Great for a quick and tasty lunch.",\n          "image": "https://example.com/prithvicafe.jpg",\n          "coordinates": {\n            "latitude": 19.1034,\n            "longitude": 72.8234\n          },\n          "ticketPricing": "₹800 - ₹1,500 for two people",\n          "travelTime": "Taxi/Uber ride from the Bollywood studio (15-30 mins depending on traffic).",\n          "bestVisitingTime": "Lunch hours (1:00 PM - 3:00 PM).",\n          "duration": "1-2 hours"\n        },\n        {\n          "placeName": "Shopping at Linking Road",\n          "details": "A bustling street market with a wide variety of clothing, accessories, and street food. Bargaining is essential! Be aware of pickpockets.",\n          "image": "https://example.com/linkingroad.jpg",\n          "coordinates": {\n            "latitude": 19.0697,\n            "longitude": 72.8339\n          },\n          "ticketPricing": "Varies depending on purchases.",\n          "travelTime": "Taxi/Uber ride from Prithvi Cafe (15-20 mins).",\n          "bestVisitingTime": "Late afternoon (4:00 PM - 7:00 PM) when the weather is cooler and the market is more lively.",\n          "duration": "2-3 hours"\n        },\n        {\n          "placeName": "Relaxation at a Spa (e.g., Quan Spa at JW Marriott Juhu)",\n          "details": "Indulge in a luxurious spa treatment to unwind and rejuvenate. Several high-end spas are located in the Juhu area.",\n          "image": "https://example.com/quanspa.jpg",\n          "coordinates": {\n            "latitude": 19.1047,\n            "longitude": 72.8264\n          },\n          "ticketPricing": "₹3,000 - ₹10,000 per person (depending on the treatment)",\n          "travelTime": "Walking distance or short taxi/Uber ride from Linking Road.",\n          "bestVisitingTime": "Late afternoon/Early evening (5:00 PM - 7:00 PM).",\n          "duration": "2-3 hours"\n        },\n        {\n          "placeName": "Dinner at Wasabi by Morimoto (The Taj Mahal Palace)",\n          "details": "Renowned Japanese restaurant offering exquisite sushi and other delicacies. A perfect ending to a luxurious trip. Reservations are strongly recommended.",\n          "image": "https://example.com/wasabi.jpg",\n          "coordinates": {\n            "latitude": 18.9220,\n            "longitude": 72.8347\n          },\n          "ticketPricing": "₹5,000 - ₹8,000 per person",\n          "travelTime": "Taxi/Uber ride from Juhu (45 mins - 1 hour depending on traffic).",\n          "bestVisitingTime": "Dinner hours (8:00 PM - 10:00 PM).",\n          "duration": "2-3 hours"\n        }\n      ]\n    }\n  }\n}\n```',
        },
      ],
    },
  ],
});
